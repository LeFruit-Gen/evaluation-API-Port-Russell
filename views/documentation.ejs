<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Documentation de l'API - Port de Plaisance</title>
  <link rel="shortcut icon" href="/img/favicon.png" type="image/png">
  <link rel="stylesheet" href="/css/doc.css">
</head>
<body>
  <main class="container">
    <h1>ğŸ“š Documentation de l'API - Capitainerie</h1>
    <p>Cette documentation prÃ©sente les routes disponibles pour interagir avec l'API de gestion du port de plaisance. Elle couvre les ressources suivantes :</p>
    <ul>
      <li><strong>Catways</strong> â€“ passerelles de mouillage</li>
      <li><strong>RÃ©servations</strong> â€“ rÃ©servations de catways par les plaisanciers</li>
      <li><strong>Utilisateurs</strong> â€“ gestion des accÃ¨s Ã  l'application (admin et utilisateur)</li>
    </ul>
    <h2>ğŸ” Authentification</h2>
    <p>L'accÃ¨s Ã  certaines routes nÃ©cessite une authentification (middleware <code>authMiddleware</code>).</p>
    <p>Les routes "catways", "rÃ©servations" et "users" sont protÃ©gÃ©es selon les rÃ´les (admin ou utilisateur).</p>
    <h2>ğŸš¤ Routes Catways</h2>
    <ul>
      <li><strong>GET</strong> /catways â€“ Liste des catways</li>
      <li><strong>GET</strong> /catways/:id â€“ DÃ©tail d'un catway</li>
      <li><strong>POST</strong> /catways â€“ CrÃ©er un catway (admin)</li>
      <li><strong>PUT</strong> /catways/:id â€“ Modifier un catway (admin)</li>
      <li><strong>DELETE</strong> /catways/:id â€“ Supprimer un catway (admin)</li>
    </ul>
    <details>
      <summary><strong>ğŸ“˜ DÃ©tails : GET /catways</strong></summary>
      <p>RÃ©cupÃ¨re la liste de tous les catways enregistrÃ©s dans le systÃ¨me.</p>
      <h4>ğŸ” AccÃ¨s : Utilisateur connectÃ© requis</h4>
      <h4>âœ… RÃ©ponse (200 OK)</h4>
      <pre><code>[
  {
    "catwayNumber": 1,
    "catwayType": "short",
    "catwayState": "bon Ã©tat"
  },
  {
    "catwayNumber": 2,
    "catwayType": "short",
    "catwayState": "bon Ã©tat"
  },
  {
    "catwayNumber": 3,
    "catwayType": "long",
    "catwayState": "rÃ©parÃ© rÃ©cemment"
  }
]</code></pre>
    </details>
    <details>
      <summary><strong>ğŸ”§ DÃ©tails : PUT /catways/:id</strong></summary>
      <p>Modifie uniquement l'Ã©tat (description) du catway spÃ©cifiÃ©.</p>
      <h4>ğŸ” AccÃ¨s : Admin uniquement</h4>
      <h4>ğŸ“¥ RequÃªte attendue</h4>
      <pre><code>{
  "catwayState": "en rÃ©paration"
}</code></pre>
      <h4>âš ï¸ Remarques</h4>
      <ul>
        <li>Le numÃ©ro (<code>catwayNumber</code>) et le type (<code>catwayType</code>) ne peuvent pas Ãªtre modifiÃ©s.</li>
        <li>La modification concerne uniquement le champ <code>catwayState</code>, qui est une description libre de l'Ã©tat de la passerelle.</li>
      </ul>
      <h4>âœ… RÃ©ponse (200 OK)</h4>
      <pre><code>{
  "message": "Catway modifiÃ© avec succÃ¨s"
}</code></pre>
    </details>
    <h4>POST /catways</h4>
    <pre><code>{
  "catwayNumber": 1,
  "catwayType": "short",
  "catwayState": "disponible"
}</code></pre>
    <p>Les rÃ©servations sont considÃ©rÃ©es comme une sous-ressource des catways. 
      L'accÃ¨s aux donnÃ©es varie selon le rÃ´le de l'utilisateur : les utilisateurs ne voient que leurs rÃ©servations actives, tandis que les administrateurs ont accÃ¨s Ã  la liste complÃ¨te via une route dÃ©diÃ©e.</p>
    <h2>ğŸ“… Routes RÃ©servations</h2>
    <ul>
      <li><strong>GET</strong> /reservations â€“ Liste des rÃ©servations</li>
      <li><strong>GET</strong> /reservations/:id â€“ DÃ©tail</li>
      <li><strong>POST</strong> /catways/:id/reservations â€“ CrÃ©er pour un catway</li>
      <li><strong>PUT</strong> /reservations/:id â€“ Modifier</li>
      <li><strong>DELETE</strong> /reservations/:id â€“ Supprimer</li>
    </ul>
    <details>
      <summary><strong>ğŸ“˜ DÃ©tails : GET /catways/:id/reservations</strong></summary>
      <p>RÃ©cupÃ¨re la liste des rÃ©servations associÃ©es Ã  un catway spÃ©cifique.</p>
      <h4>ğŸ” AccÃ¨s : Utilisateur connectÃ© requis</h4>
      <p>Cette route permet d'afficher uniquement les rÃ©servations liÃ©es au catway spÃ©cifiÃ© par l'ID.</p>
      <h4>âœ… RÃ©ponse (200 OK)</h4>
      <pre><code>[
  {
    "catwayNumber": 1,
    "clientName": "Jean Dupont",
    "boatName": "Le Flottant",
    "startDate": "2025-04-05T00:00:00.000Z",
    "endDate": "2025-04-10T00:00:00.000Z"
  },
  {
    "catwayNumber": 1,
    "clientName": "Marine Leroy",
    "boatName": "Ocean Spirit",
    "startDate": "2025-04-12T00:00:00.000Z",
    "endDate": "2025-04-18T00:00:00.000Z"
  }
]</code></pre>
    </details>
    <details>
      <summary><strong>ğŸ“˜ DÃ©tails : GET /reservations/all (admin uniquement)</strong></summary>
      <p>Affiche l'ensemble des rÃ©servations, incluant celles Ã  venir, en cours et passÃ©es.</p>
      <h4>ğŸ” AccÃ¨s : Admin uniquement</h4>
      <p>Cette route permet une vision complÃ¨te des rÃ©servations sur tous les catways.</p>
      <h4>âœ… RÃ©ponse (200 OK)</h4>
      <pre><code>[
  {
    "catwayNumber": 2,
    "clientName": "Luc Martin",
    "boatName": "Vent du Large",
    "startDate": "2025-03-29T00:00:00.000Z",
    "endDate": "2025-04-03T00:00:00.000Z"
  },
  {
    "catwayNumber": 5,
    "clientName": "Nina Roy",
    "boatName": "Capitaine Cool",
    "startDate": "2025-04-05T00:00:00.000Z",
    "endDate": "2025-04-07T00:00:00.000Z"
  }
]</code></pre>
    </details>
    <details>
      <summary><strong>ğŸ”§ DÃ©tails : PUT /reservations/:id</strong></summary>
      <p>Permet de modifier les informations d'une rÃ©servation existante.</p>
      <h4>ğŸ” AccÃ¨s :</h4>
      <ul>
        <li><strong>Admin</strong> : peut modifier toutes les rÃ©servations.</li>
        <li><strong>User</strong> : ne peut modifier que ses propres rÃ©servations.</li>
      </ul>
      <h4>ğŸ“¥ Champs modifiables</h4>
      <ul>
        <li><code>clientName</code></li>
        <li><code>boatName</code></li>
        <li><code>startDate</code></li>
        <li><code>endDate</code></li>
      </ul>
      <h4>ğŸ“¥ Exemple</h4>
      <pre><code>{
  "clientName": "Claire Dubois",
  "boatName": "L'Ã‰vasion",
  "startDate": "2025-04-08T00:00:00.000Z",
  "endDate": "2025-04-12T00:00:00.000Z"
}</code></pre>
      <h4>âœ… RÃ©ponse (200 OK)</h4>
      <pre><code>{
  "message": "RÃ©servation modifiÃ©e avec succÃ¨s"
}</code></pre>
    </details>
    <h2>ğŸ‘¥ Routes Utilisateurs</h2>
    <ul>
      <li><strong>GET</strong> /users â€“ Liste des utilisateurs (admin)</li>
      <li><strong>GET</strong> /users/:email â€“ DÃ©tail utilisateur</li>
      <li><strong>POST</strong> /users â€“ CrÃ©er un utilisateur</li>
      <li><strong>PUT</strong> /users/:email â€“ Modifier</li>
      <li><strong>DELETE</strong> /users/:email â€“ Supprimer</li>
      <li><strong>POST</strong> /login â€“ Connexion</li>
      <li><strong>GET</strong> /logout â€“ DÃ©connexion</li>
    </ul>
    <details>
      <summary><strong>ğŸ“˜ DÃ©tails : GET /users</strong></summary>
      <p>RÃ©cupÃ¨re la liste complÃ¨te des utilisateurs enregistrÃ©s.</p>
      <h4>ğŸ” AccÃ¨s : Admin uniquement</h4>
      <pre><code>[
  {
    "username": "admin",
    "email": "admin@mail.com",
    "role": "admin",
    "createdAt": "2024-12-01T13:45:00.000Z",
    "updatedAt": "2025-01-15T17:32:00.000Z"
  }
]</code></pre>
    </details>
    <h2>ğŸ” Codes HTTP courants</h2>
    <ul>
      <li><strong>200</strong> â€“ OK</li>
      <li><strong>201</strong> â€“ CrÃ©Ã© avec succÃ¨s</li>
      <li><strong>400</strong> â€“ RequÃªte invalide</li>
      <li><strong>401</strong> â€“ Non authentifiÃ©</li>
      <li><strong>403</strong> â€“ Non autorisÃ©</li>
      <li><strong>404</strong> â€“ Ressource non trouvÃ©e</li>
      <li><strong>500</strong> â€“ Erreur serveur</li>
    </ul>
  </main>
</body>
</html>